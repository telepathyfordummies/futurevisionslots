
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title> </title>

<style>
body {
  background:#1a1a1a;
  color:#e9e2d0;
  font-family: monospace;
  text-align:center;
  padding-top:40px;
}

/* --- MACHINE CONTAINER --- */
.machine-container {
  position: relative;
  width: 600px;
  margin: 0 auto;
}

/* --- MACHINE IMAGE BUTTON --- */
#machine {
  width: 100%;
  height: auto;
  cursor: pointer;
  transition: transform .1s;
}
#machine:active {
  transform: scale(0.95);
}

/* --- POPUP SCROLL --- */
#scrollPopup {
  position: absolute;            
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.8);
  opacity: 0;

  width: 480px;
  min-height: 250px;            
  max-height: 80%;
  padding: 40px 20px;

  background: url("scroll3.png") no-repeat center center / cover;

  display: none;                 
  flex-direction: column;       
  justify-content: center;
  align-items: center;
  text-align: center;

  color: black;
  font-size: 26px;
  font-weight: bold;
  text-shadow: 2px 2px 0 #c3b39a;

  box-sizing: border-box;
  overflow-y: auto;
}

/* Pop-in animation */
#scrollPopup.pop-in {
  animation: popIn 0.35s forwards;
}

@keyframes popIn {
  0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
  60% { transform: translate(-50%, -50%) scale(1.05); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

/* --- SCROLL TEXT --- */
#scrollText {
  width: 100%;
  margin: 0;
}

/* Close cursor */
#scrollPopup.closeable {
  cursor: pointer;
}
</style>
</head>
<body>

<h2> </h2>

<!-- SOUND EFFECT -->
<audio id="scrollSound" src="tick.mp3" preload="auto"></audio>

<!-- MACHINE CONTAINER -->
<div class="machine-container">
  <img id="machine" src="machine.png" alt="machine">

  <!-- SCROLL POPUP -->
  <div id="scrollPopup">
    <div id="scrollText"></div>
  </div>
</div>

<script>

  //  TOGGLE DAILY LIMIT ON/OFF

const DAILY_LIMIT_ENABLED = false;  // change to true when ready

  // ITEM POOL!
  
const spoilers = [
  "Craig really could see it in her eyes then.",
  "Sometimes a story is told nonlinearly.",
  "Declarations of love can ruin things even if the love is reciprocated.",
  "If you eat something, sometimes you can absorb its power.",
  "Someone is always watching.",
  "Anything is a weapon if you're stupid enough.",
  "Connections terrify those without any.",
  "Natural laws cannot be erased.",
  "...",
  "Even people you should always listen to can be wrong sometimes.",
  "M0DS R D3AD",
  "There is always more to this story.",
  "THE RAT KNOWS TOO MUCH.",
  "Hello World is used exactly twice within this story.",
  "Nightmares are often the source of déjà rêvé.",
  "WHO IS ELIAS?",
  "WHO ARE YOU?",
  "???",
  "GOD ORIGINATES AT THE BOARDWALK.",
  "Attention: If you or a loved one has been diagnosed with Mesothelioma you may to be entitled to financial compensation. Mesothelioma is a rare cancer linked to asbestos exposure. Exposure to asbestos in they Navy, shipyards, mills, heating, construction or the automotive industries may put you at risk. Please don't wait, call 1-800-99 LAW USA today for a free legal consultation and financial information packet. Mesothelioma patients call now! 1-800-99 LAW USA.",
  "horse1.png",
  "horse2.png"
];


// DAILY LIMIT FUNCTIONS
function canSpin() {
  if (!DAILY_LIMIT_ENABLED) return true;   // unlimited while testing

  const last = localStorage.getItem("lastSpin");
  const today = new Date().toISOString().slice(0, 10);
  return last !== today;
}

function setSpinDate() {
  if (!DAILY_LIMIT_ENABLED) return;  // do nothing if disabled

  const today = new Date().toISOString().slice(0, 10);
  localStorage.setItem("lastSpin", today);
}


// MAIN CLICK HANDLER
document.getElementById("machine").addEventListener("click", () => {

  if (!canSpin()) {
    showScroll("You've already spun today!");
    return;
  }

  setSpinDate();
  
document.getElementById("machine").addEventListener("click", () => {
  const pick = spoilers[Math.floor(Math.random() * spoilers.length)];
  showScroll(pick);
});

function showScroll(text) {
  const popup = document.getElementById("scrollPopup");
  const t = document.getElementById("scrollText");
  const sound = document.getElementById("scrollSound");

  // Show text or image
  if (text.endsWith(".png") || text.endsWith(".jpg")) {
    t.innerHTML = `<img src="${text}" style="max-width:200px;">`;
  } else {
    t.textContent = text;
  }

  // Reset and play sound
  sound.currentTime = 0;
  sound.play();

  // stop after 150ms (change to whatever timing you want)
setTimeout(() => {
  sound.pause();
  sound.currentTime = 0;
}, 150);
  
  // Show scroll & animate
  popup.style.display = "flex";
  popup.classList.add("closeable");

  // Restart animation cleanly
  popup.classList.remove("pop-in");
  void popup.offsetWidth; // forces reflow so animation can replay
  popup.classList.add("pop-in");
}

// Close scroll
document.getElementById("scrollPopup").addEventListener("click", () => {
  const popup = document.getElementById("scrollPopup");
  popup.style.display = "none";
});
</script>

</body>
</html>
